# Review Instructions

효과적인 코드 리뷰를 위한 상세 가이드입니다.

## 🎯 코드 리뷰 목표

### 1. 품질 보증
- **버그 예방**: 잠재적 오류 및 논리적 결함 식별
- **성능 최적화**: 비효율적인 코드 패턴 개선
- **보안 강화**: 보안 취약점 및 위험 요소 제거
- **표준 준수**: 코딩 스타일 및 규칙 일관성 유지

### 2. 지식 공유
- **기술 전파**: 새로운 기법 및 라이브러리 소개
- **도메인 이해**: 비즈니스 로직 및 요구사항 공유
- **멘토링**: 팀원 간 기술 역량 향상
- **협업 강화**: 코드 소유권 공유 및 팀워크 증진

## 📋 리뷰 체크리스트

### 1. 기능성 검토
```markdown
#### 🔍 로직 검증
- [ ] 요구사항을 올바르게 구현했는가?
- [ ] 예외 상황이 적절히 처리되는가?
- [ ] 경계값(boundary conditions)이 고려되었는가?
- [ ] 비즈니스 룰이 정확히 반영되었는가?

#### 🧪 테스트 검증
- [ ] 단위 테스트가 작성되었는가?
- [ ] 테스트 커버리지가 충분한가? (최소 80%)
- [ ] 엣지 케이스가 테스트되었는가?
- [ ] 통합 테스트가 필요한가?

#### 📊 성능 고려사항
- [ ] 알고리즘 복잡도가 적절한가?
- [ ] 메모리 사용량이 효율적인가?
- [ ] 데이터베이스 쿼리가 최적화되었는가?
- [ ] 캐싱이 적절히 활용되었는가?
```

### 2. 코드 품질 검토
```markdown
#### 🏗️ 구조 및 설계
- [ ] 클래스/함수가 단일 책임 원칙을 따르는가?
- [ ] 의존성이 적절히 관리되는가?
- [ ] 추상화 수준이 일관적인가?
- [ ] SOLID 원칙이 지켜지는가?

#### 📝 가독성 및 유지보수성
- [ ] 변수/함수/클래스명이 의미를 명확히 표현하는가?
- [ ] 코드가 자체 문서화되어 있는가?
- [ ] 복잡한 로직에 적절한 주석이 있는가?
- [ ] 매직 넘버나 하드코딩된 값이 없는가?

#### 🔒 보안 고려사항
- [ ] 입력값 검증이 적절히 이루어지는가?
- [ ] SQL 인젝션 등 보안 취약점이 없는가?
- [ ] 민감한 정보가 노출되지 않는가?
- [ ] 인증/인가가 적절히 구현되었는가?
```

## 💬 리뷰 커뮤니케이션 가이드

### 1. 건설적인 피드백 작성법
```markdown
# Good: 구체적이고 건설적인 피드백
💡 **제안**: 이 메서드는 현재 여러 책임을 가지고 있습니다. 
데이터 검증과 비즈니스 로직을 분리하는 것이 어떨까요?

```python
# 현재 코드
def process_order(order_data):
    # 검증 로직
    if not order_data.get('customer_id'):
        raise ValueError("Customer ID required")
    
    # 비즈니스 로직
    total = calculate_total(order_data['items'])
    return create_order(order_data, total)

# 제안하는 개선안
def process_order(order_data):
    validated_data = validate_order_data(order_data)
    return create_order_from_validated_data(validated_data)
```

참고: [Clean Code - Single Responsibility Principle](링크)

# Bad: 비건설적이고 모호한 피드백
❌ 이 코드는 잘못되었습니다. 다시 작성하세요.
```

### 2. 피드백 우선순위 표시
```markdown
🚨 **Critical**: 보안 취약점이나 심각한 버그
⚠️ **Major**: 성능 문제나 설계 결함
💡 **Minor**: 스타일 개선이나 작은 최적화
🤔 **Question**: 코드 이해를 위한 질문
📚 **Learning**: 지식 공유나 대안 제시
```

### 3. 코드 예시와 함께 설명
```python
# 🚨 Critical: SQL 인젝션 취약점
# 현재 코드 (위험)
query = f"SELECT * FROM users WHERE id = {user_id}"

# 수정 제안
query = "SELECT * FROM users WHERE id = %s"
cursor.execute(query, (user_id,))

# ⚠️ Major: N+1 쿼리 문제
# 현재 코드 (비효율적)
orders = Order.objects.all()
for order in orders:
    print(order.customer.name)  # 각 주문마다 DB 쿼리 실행

# 수정 제안 (JOIN 사용)
orders = Order.objects.select_related('customer').all()
for order in orders:
    print(order.customer.name)  # 한 번의 쿼리로 해결

# 💡 Minor: 더 Pythonic한 코드
# 현재 코드
result = []
for item in items:
    if item.is_valid():
        result.append(item.process())

# 제안 (리스트 컴프리헨션)
result = [item.process() for item in items if item.is_valid()]
```

## 🔄 리뷰 프로세스

### 1. 리뷰 요청 전 자가 점검
```markdown
### 📝 PR 생성 전 체크리스트
- [ ] 모든 테스트가 통과하는가?
- [ ] 코드 스타일 가이드를 따랐는가?
- [ ] 커밋 메시지가 명확한가?
- [ ] PR 설명이 충분한가?
- [ ] 관련 문서가 업데이트되었는가?

### 📋 PR 템플릿
```yaml
## 변경 사항 요약
간단히 무엇을 변경했는지 설명

## 변경 이유
왜 이 변경이 필요한지 설명

## 테스트 방법
어떻게 테스트했는지 설명

## 체크리스트
- [ ] 테스트 추가/업데이트
- [ ] 문서 업데이트
- [ ] 브레이킹 체인지 여부 확인
- [ ] 성능 영향 검토

## 스크린샷 (UI 변경시)
변경된 UI 스크린샷 첨부
```

### 2. 리뷰어 선정 기준
```markdown
### 🎯 리뷰어 배정 가이드
1. **도메인 전문가**: 해당 비즈니스 영역 전문가
2. **기술 전문가**: 사용된 기술 스택 전문가  
3. **시니어 개발자**: 아키텍처 및 설계 검토
4. **팀 리더**: 프로젝트 방향성 및 우선순위 검토

### ⏱️ 리뷰 타임라인
- **즉시 리뷰 (긴급)**: 핫픽스, 보안 패치
- **24시간 내**: 기능 개발, 버그 수정
- **48시간 내**: 리팩토링, 문서 업데이트
- **주간 리뷰**: 대규모 아키텍처 변경
```

### 3. 리뷰 진행 가이드
```markdown
### 🔍 리뷰 순서
1. **전체 구조 파악** (5분)
   - PR 설명 읽기
   - 변경된 파일 목록 확인
   - 전체적인 변경 범위 이해

2. **핵심 로직 검토** (15-20분)
   - 주요 비즈니스 로직 검증
   - 알고리즘 및 데이터 구조 검토
   - 성능 및 확장성 고려

3. **세부 구현 검토** (10-15분)
   - 코딩 스타일 및 규칙 준수
   - 예외 처리 및 에러 핸들링
   - 테스트 코드 품질

4. **피드백 작성** (5-10분)
   - 우선순위별 피드백 정리
   - 구체적인 개선 제안
   - 긍정적인 부분도 언급
```

## 🎭 리뷰 상황별 대응

### 1. 대규모 PR 리뷰
```markdown
### 📊 대규모 변경사항 리뷰 전략
1. **사전 설계 검토**
   - 아키텍처 다이어그램 확인
   - 설계 문서 리뷰
   - 팀 회의를 통한 방향성 논의

2. **단계별 리뷰**
   - 핵심 인터페이스 먼저 검토
   - 주요 비즈니스 로직 검증
   - 세부 구현 사항 마지막 확인

3. **병렬 리뷰**
   - 여러 리뷰어가 다른 영역 담당
   - 영역별 전문가 배정
   - 리뷰 결과 통합 회의
```

### 2. 긴급 수정사항 리뷰
```markdown
### 🚨 핫픽스 리뷰 프로세스
1. **즉시 리뷰** (30분 이내)
   - 보안 취약점 즉시 확인
   - 사이드 이펙트 검증
   - 최소 2명 승인 필요

2. **배포 후 추가 검토**
   - 임시 수정사항 개선 계획
   - 근본 원인 분석
   - 재발 방지 대책 수립
```

### 3. 주니어 개발자 코드 리뷰
```markdown
### 🌱 멘토링 중심 리뷰
1. **교육적 피드백**
   - 왜 그런 방식이 더 좋은지 설명
   - 관련 자료나 문서 링크 제공
   - 실무 경험 공유

2. **점진적 개선**
   - 한 번에 너무 많은 지적 지양
   - 우선순위를 정해서 단계적 개선
   - 긍정적인 부분 적극 인정

3. **페어 프로그래밍 제안**
   - 복잡한 로직은 함께 작업
   - 실시간 코딩 세션
   - 지식 전수 기회 활용
```

## 📊 리뷰 품질 측정

### 1. 정량적 지표
```markdown
### 📈 리뷰 메트릭
- **리뷰 속도**: 평균 리뷰 완료 시간
- **참여율**: 팀원별 리뷰 참여 빈도
- **피드백 품질**: 발견된 이슈의 심각도별 분포
- **개선 효과**: 리뷰 후 버그 발생률 감소

### 📊 월간 리뷰 리포트 예시
```yaml
리뷰 완료: 156건
평균 리뷰 시간: 2.3시간
Critical 이슈 발견: 12건
Major 이슈 발견: 34건
팀원별 참여율:
  - Alice: 89% (139/156)
  - Bob: 76% (118/156)
  - Charlie: 92% (143/156)
```

### 2. 정성적 평가
```markdown
### 🎯 리뷰 품질 평가 기준
1. **피드백 명확성**: 개선 방향이 구체적인가?
2. **학습 효과**: 팀원의 역량 향상에 기여하는가?
3. **코드 품질**: 리뷰 후 코드 품질이 향상되는가?
4. **커뮤니케이션**: 건설적이고 존중하는 분위기인가?
```

## 🛠️ 리뷰 도구 및 자동화

### 1. 자동화된 검증
```yaml
# .github/workflows/code-review.yml
name: Automated Code Review
on: [pull_request]

jobs:
  code-quality:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Run Linting
        run: |
          flake8 src/
          pylint src/
          
      - name: Run Security Scan
        run: bandit -r src/
        
      - name: Run Tests
        run: |
          pytest --cov=src --cov-report=xml
          
      - name: SonarQube Analysis
        uses: sonarqube-quality-gate-action@master
```

### 2. 리뷰 템플릿 및 체크리스트
```markdown
<!-- .github/pull_request_template.md -->
## 📝 변경사항 체크리스트
- [ ] 테스트 추가/수정
- [ ] 문서 업데이트  
- [ ] 브레이킹 체인지 없음
- [ ] 성능 영향 검토 완료
- [ ] 보안 검토 완료

## 🔍 리뷰어를 위한 가이드
### 주요 검토 포인트
- 새로운 비즈니스 로직: `src/services/order_service.py:45-78`
- 데이터베이스 마이그레이션: `migrations/2024_10_17_add_order_status.sql`
- API 변경사항: `src/api/order_controller.py:12-30`

### 테스트 방법
1. 로컬 환경에서 `make test` 실행
2. 주문 생성 API 테스트: `POST /api/orders`
3. 상태 변경 워크플로우 확인
```

---

*효과적인 코드 리뷰는 코드 품질 향상뿐만 아니라 팀의 성장과 협업 문화 발전에 핵심적인 역할을 합니다.*